bun test v1.1.38 (bf2f153f)

tests/abi.test.ts:
(skip) ABI > E2E > staticArray
(skip) ABI > E2E > returnStaticArray
(skip) ABI > E2E > staticArrayArg
(skip) ABI > E2E > nonLiteralStaticArrayElements
(skip) ABI > E2E > mixedStaticArrayElements
(skip) ABI > E2E > nonLiteralStaticArrayAccess
(skip) ABI > E2E > setStaticArrayElement
(skip) ABI > E2E > staticArrayInStorageRef
(skip) ABI > E2E > updateStaticArrayInStorageRef
(skip) ABI > E2E > staticArrayInStorageMap
(skip) ABI > E2E > updateStaticArrayInStorageMap
(skip) ABI > E2E > nestedStaticArray
(skip) ABI > E2E > updateNestedStaticArrayElement
(skip) ABI > E2E > updateNestedStaticArray
(skip) ABI > E2E > threeDimensionalUint16Array
(skip) ABI > E2E > simpleTuple
(skip) ABI > E2E > arrayInTuple
(skip) ABI > E2E > tupleInArray
(skip) ABI > E2E > tupleInTuple
(skip) ABI > E2E > shortTypeNotation
(skip) ABI > E2E > disgusting
(skip) ABI > E2E > returnTuple
(skip) ABI > E2E > tupleArg
(skip) ABI > E2E > dynamicArray
(skip) ABI > E2E > returnDynamicArray
(skip) ABI > E2E > dynamicArrayArg
(skip) ABI > E2E > updateDynamicArrayElement
(skip) ABI > E2E > dynamicTupleArray
(skip) ABI > E2E > returnTupleWithDyamicArray
(skip) ABI > E2E > returnDynamicArrayFromTuple
(skip) ABI > E2E > updateDynamicArrayInTuple
(skip) ABI > E2E > nonLiteralDynamicElementInTuple
(skip) ABI > E2E > arrayPush
(skip) ABI > E2E > arrayPop
(skip) ABI > E2E > arrayPopValue
(skip) ABI > E2E > arraySplice
(skip) ABI > E2E > arraySpliceValue
(skip) ABI > E2E > dynamicArrayElements
(skip) ABI > E2E > spliceLastElement
(skip) ABI > E2E > spliceLastElementValue
(skip) ABI > E2E > spliceFirstElement
(skip) ABI > E2E > spliceFirstElementValue
(skip) ABI > E2E > stringReturn
(skip) ABI > E2E > stringArg
(skip) ABI > E2E > stringInTuple
(skip) ABI > E2E > accesStringInTuple
(skip) ABI > E2E > updateStringInTuple
(skip) ABI > E2E > updateTupleWithOnlyDynamicTypes
(skip) ABI > E2E > shortenDynamicElementInTuple
(skip) ABI > E2E > namedTuple
(skip) ABI > E2E > updateNamedTuple
(skip) ABI > E2E > customTypes
(skip) ABI > E2E > staticStringArrayArg
(skip) ABI > E2E > dynamicAccessOfDynamicElementInStaticArray
(skip) ABI > E2E > dynamicArrayInMiddleOfTuple
(skip) ABI > E2E > accessDynamicArrayInMiddleOfTuple
(skip) ABI > E2E > accessDynamicArrayElementInTuple
(skip) ABI > E2E > updateDynamicArrayInMiddleOfTuple
(skip) ABI > E2E > nestedTuple
(skip) ABI > E2E > updateDynamicElementInTupleWithSameLength
(skip) ABI > E2E > accessDynamicStringArray
(skip) ABI > E2E > txnTypes
(skip) ABI > E2E > arrayLength
(skip) ABI > E2E > stringLength
(skip) ABI > E2E > arrayRef
(skip) ABI > E2E > nestedArrayRef
(skip) ABI > E2E > nonLiteralNestedArrayRef
(skip) ABI > E2E > multiNestedArrayRef
(skip) ABI > E2E > objectArrayRef
(skip) ABI > E2E > stringAccessor
(skip) ABI > E2E > emptyStaticArray
(skip) ABI > E2E > partialStaticArray
(skip) ABI > E2E > emptyDynamicArray
(skip) ABI > E2E > booleanArgAndReturn
(skip) ABI > E2E > boolTuple
(skip) ABI > E2E > staticBoolArray
(skip) ABI > E2E > boolTupleAccess
(skip) ABI > E2E > staticBoolArrayAccess
(skip) ABI > E2E > dynamicBoolArray
(skip) ABI > E2E > dynamicBoolArrayAccess
(skip) ABI > E2E > staticBoolArrayUpdate
(skip) ABI > E2E > dynamicBoolArrayUpdate
(skip) ABI > E2E > boolTupleUpdate
(skip) ABI > E2E > objectRef
(skip) ABI > E2E > storageRefKey
(skip) ABI > E2E > storageRefAccount
(skip) ABI > E2E > angularCasting
(skip) ABI > E2E > castBytesFunction
(skip) ABI > E2E > rawBytesFunction
(skip) ABI > E2E > globalMethodInChain
(skip) ABI > E2E > opcodeParamFromObject
(skip) ABI > E2E > arrayInObjectInState
(skip) ABI > E2E > nestedObject
(skip) ABI > E2E > updateArrayRefInBoxStorage
(skip) ABI > E2E > extractUint
(skip) ABI > E2E > bytesReturn
(skip) ABI > E2E > nestedTypesInSignature
(skip) ABI > E2E > maxUfixed
(skip) ABI > E2E > chainedPropertyAfterTuple
(skip) ABI > E2E > uintCasting
(skip) ABI > E2E > uint64Casting
(skip) ABI > E2E > bytesCasting
(skip) ABI > E2E > biggerByteCasting
(skip) ABI > E2E > smallerByteCasting
(skip) ABI > E2E > multiBytesTuple
(skip) ABI > E2E > boolInObj
(skip) ABI > E2E > plusEqualsArrayValue
(skip) ABI > E2E > plusEqualsObjValue
(skip) ABI > E2E > plusEqualsObjValueInBox
(skip) ABI > E2E > uintNComparison
(skip) ABI > E2E > booleanLastInObj
(skip) ABI > E2E > nestedStructInBoxMap
(skip) ABI > E2E > staticForEach
(skip) ABI > E2E > nestedStaticForEach
(skip) ABI > E2E > nestedStaticForEachInBox
(skip) ABI > E2E > largeNestedStaticForEachInBox
(skip) ABI > E2E > forEachReturn
(skip) ABI > E2E > staticArrayLength
(skip) ABI > E2E > objectInArgs
(skip) ABI > E2E > nestedStaticArrayLength
(skip) ABI > E2E > nestedArrayLengthInObjectVariable
(skip) ABI > staticForOf
(skip) ABI > largeNestedStaticForOfInBox
(skip) ABI > forOfContinue
(skip) ABI > forOfBreak
(skip) ABI > accessStaticArrayInBoxInVariable
(skip) ABI > staticTypeInBox
(skip) ABI > storagePropertyReferenceInBox
(skip) ABI > pushToArrayInBox
(skip) ABI > updateStaticFieldInDynamicObjectInBox
(skip) ABI > dynamicArrayLength
(skip) ABI > dynamicArrayIteration
(skip) ABI > postBoolTupleOffset
(skip) ABI > nestedArrayInBox
(skip) ABI > nestedArrayInBoxLast
(skip) ABI > nestedArrayInBoxWithoutBool
Received error executing Atomic Transaction Composer, for more information enable the debug flag
TEAL                           | PC   | STACK
-------------------------------|------|-------
intcblock 0 1                  | 1    | []
bytecblock 0x                  | 5    | []
txn ApplicationID              | 8    | [2608]
!                              | 10   | [0]
pushint 6                      | 11   | [0,6]
*                              | 13   | [0]
txn OnCompletion               | 14   | [0,0]
+                              | 16   | [0]
switch *call_NoOp *NOT_IMPL... | 17   | []
pushbytes 0xc49cb9a7 // met... | 156  | [0xc49cb9a7]
txna ApplicationArgs 0         | 162  | [0xc49cb9a7,0xc49cb9a7]
match *abi_route_nestedArra... | 165  | []
pushbytes 0x151f7c75           | 44   | [0x151f7c75]
callsub nestedArrayAlongsid... | 50   | [0x151f7c75]
proto 0 1                      | 57   | [0x151f7c75]
bytec 0 // 0x                  | 60   | [0x151f7c75,0]
bytec 0 //  initial head       | 61   | [0x151f7c75,0,0]
bytec 0 //  initial tail       | 62   | [0x151f7c75,0,0,0]
pushbytes 0x001a // initial... | 63   | [0x151f7c75,0,0,0,0x001a]
pushbytes 0x000261626364656... | 67   | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768]
callsub *process_dynamic_tu... | 79   | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768]
proto 4 3                      | 183  | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768]
frame_dig -4 // tuple head     | 186  | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768,0]
frame_dig -2 // head offset    | 188  | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768,0,0x001a]
concat                         | 190  | [0x151f7c75,0,0,0,0x001a,0x00026162636465666768,0x001a]
frame_bury -4 // tuple head    | 191  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768]
frame_dig -1 // element        | 193  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768]
dup                            | 195  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,0x00026162636465666768]
len                            | 196  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,10]
frame_dig -2 // head offset    | 197  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,10,0x001a]
btoi                           | 199  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,10,26]
+                              | 200  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,36]
itob                           | 201  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,0x0000000000000024]
extract 6 2                    | 202  | [0x151f7c75,0,0x001a,0,0x001a,0x00026162636465666768,0x00026162636465666768,0x0024]
frame_bury -2 // head offset   | 205  | [0x151f7c75,0,0x001a,0,0x0024,0x00026162636465666768,0x00026162636465666768]
frame_dig -3 // tuple tail     | 207  | [0x151f7c75,0,0x001a,0,0x0024,0x00026162636465666768,0x00026162636465666768,0]
swap                           | 209  | [0x151f7c75,0,0x001a,0,0x0024,0x00026162636465666768,0,0x00026162636465666768]
concat                         | 210  | [0x151f7c75,0,0x001a,0,0x0024,0x00026162636465666768,0x00026162636465666768]
frame_bury -3 // tuple tail    | 211  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x00026162636465666768]
frame_dig -4 // tuple head     | 213  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x00026162636465666768,0x001a]
frame_dig -3 // tuple tail     | 215  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x00026162636465666768,0x001a,0x00026162636465666768]
frame_dig -2 // head offset    | 217  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x00026162636465666768,0x001a,0x00026162636465666768,0x0024]
retsub                         | 219  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024]
pushbytes 0x0000000000000001   | 82   | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001]
callsub *process_static_tup... | 92   | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001]
proto 4 3                      | 170  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001]
frame_dig -4 // tuple head     | 173  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001,0x001a]
frame_dig -1 // element        | 175  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001,0x001a,0x0000000000000001]
concat                         | 177  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001,0x001a0000000000000001]
frame_dig -3 // tuple tail     | 178  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001,0x001a0000000000000001,0x00026162636465666768]
frame_dig -2 // head offset    | 180  | [0x151f7c75,0,0x001a,0x00026162636465666768,0x0024,0x0000000000000001,0x001a0000000000000001,0x00026162636465666768,0x0024]
retsub                         | 182  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024]
pushbytes 0x0000000000000002   | 95   | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002]
callsub *process_static_tup... | 105  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002]
proto 4 3                      | 170  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002]
frame_dig -4 // tuple head     | 173  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002,0x001a0000000000000001]
frame_dig -1 // element        | 175  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002,0x001a0000000000000001,0x0000000000000002]
concat                         | 177  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002,0x001a00000000000000010000000000000002]
frame_dig -3 // tuple tail     | 178  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002,0x001a00000000000000010000000000000002,0x00026162636465666768]
frame_dig -2 // head offset    | 180  | [0x151f7c75,0,0x001a0000000000000001,0x00026162636465666768,0x0024,0x0000000000000002,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024]
retsub                         | 182  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024]
pushbytes 0x0000000000000003   | 108  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003]
callsub *process_static_tup... | 118  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003]
proto 4 3                      | 170  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003]
frame_dig -4 // tuple head     | 173  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003,0x001a00000000000000010000000000000002]
frame_dig -1 // element        | 175  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003,0x001a00000000000000010000000000000002,0x0000000000000003]
concat                         | 177  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003,0x001a000000000000000100000000000000020000000000000003]
frame_dig -3 // tuple tail     | 178  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768]
frame_dig -2 // head offset    | 180  | [0x151f7c75,0,0x001a00000000000000010000000000000002,0x00026162636465666768,0x0024,0x0000000000000003,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024]
retsub                         | 182  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024]
pushbytes 0x00                 | 121  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00]
intc 0 // 0                    | 124  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0]
dup                            | 125  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0,0]
setbit                         | 126  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00]

callsub *process_static_tup... | 127  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00]
proto 4 3                      | 170  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00]
frame_dig -4 // tuple head     | 173  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0x001a000000000000000100000000000000020000000000000003]
frame_dig -1 // element        | 175  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0x001a000000000000000100000000000000020000000000000003,0x00]
concat                         | 177  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0x001a00000000000000010000000000000002000000000000000300]
frame_dig -3 // tuple tail     | 178  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0x001a00000000000000010000000000000002000000000000000300,0x00026162636465666768]
frame_dig -2 // head offset    | 180  | [0x151f7c75,0,0x001a000000000000000100000000000000020000000000000003,0x00026162636465666768,0x0024,0x00,0x001a00000000000000010000000000000002000000000000000300,0x00026162636465666768,0x0024]
retsub                         | 182  | [0x151f7c75,0,0x001a00000000000000010000000000000002000000000000000300,0x00026162636465666768,0x0024]
concat                         | 130  | [0x151f7c75,0,0x001a00000000000000010000000000000002000000000000000300,0x000261626364656667680024]
pop // pop head offset         | 131  | [0x151f7c75,0,0x001a00000000000000010000000000000002000000000000000300]
concat // concat head and tail | 132  | [0x151f7c75,0x001a00000000000000010000000000000002000000000000000300]
frame_bury 0 // o: T10         | 133  | [0x151f7c75]
24 |      * @param errorDetails The details of the logic error
25 |      * @param program The TEAL source code, split by line
26 |      * @param map The source map of the TEAL source code
27 |      */
28 |     constructor(errorDetails, program, map) {
29 |         super();
             ^
error: frame_bury above stack. at:72. Error during resource population simulation in transaction 0: transaction AJ655D3QX3FPHISBAYATEFN67MS2CTZY3IYXOYPNYASBUHL5OVJQ: logic eval error: frame_bury above stack. Details: app=2608, pc=133, opcodes=pop; concat; frame_bury 0
      at /Users/joe/git/algorandfoundation/tealscript/node_modules/@algorandfoundation/algokit-utils/types/logic-error.mjs:29:9

24 |      * @param errorDetails The details of the logic error
25 |      * @param program The TEAL source code, split by line
26 |      * @param map The source map of the TEAL source code
27 |      */
28 |     constructor(errorDetails, program, map) {
29 |         super();
             ^
error: frame_bury above stack. at:72. Error during resource population simulation in transaction 0: transaction AJ655D3QX3FPHISBAYATEFN67MS2CTZY3IYXOYPNYASBUHL5OVJQ: logic eval error: frame_bury above stack. Details: app=2608, pc=133, opcodes=pop; concat; frame_bury 0
      at /Users/joe/git/algorandfoundation/tealscript/node_modules/@algorandfoundation/algokit-utils/types/logic-error.mjs:29:9
(fail) ABI > nestedArrayAlongsideBoolean [1040.50ms]

 0 pass
 136 skip
 1 fail
 3 expect() calls
Ran 137 tests across 1 files. [2.52s]
