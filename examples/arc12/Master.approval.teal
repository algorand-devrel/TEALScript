#pragma version 8
	b main

bare_route_create:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	==
	&&
	assert

	// no dupn needed
	callsub create
	int 1
	return

create:
	proto 0 0

	// examples/arc12/arc12.algo.ts:136
	// assert(this.txn.applicationID === Application.zeroIndex)
	txn ApplicationID
	int 0
	==
	assert
	retsub

abi_route_createVault:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert
	byte 0x; dup
	txn GroupIndex
	int 1
	-
	txna ApplicationArgs 1
	btoi
	txnas Accounts
	callsub createVault
	int 1
	return

createVault:
	proto 4 0

	// examples/arc12/arc12.algo.ts:140
	// assert(!this.vaultMap.exists(receiver))
	frame_dig -1 // receiver: account
	box_get
	swap
	pop
	!
	assert

	// examples/arc12/arc12.algo.ts:141
	// assert(mbrPayment.receiver === globals.currentApplicationAddress)
	frame_dig -2 // mbrPayment: pay
	gtxns Receiver
	global CurrentApplicationAddress
	==
	assert

	// examples/arc12/arc12.algo.ts:142
	// assert(mbrPayment.sender === this.txn.sender)
	frame_dig -2 // mbrPayment: pay
	gtxns Sender
	txn Sender
	==
	assert

	// examples/arc12/arc12.algo.ts:143
	// assert(mbrPayment.closeRemainderTo === globals.zeroAddress)
	frame_dig -2 // mbrPayment: pay
	gtxns CloseRemainderTo
	global ZeroAddress
	==
	assert

	// examples/arc12/arc12.algo.ts:145
	// preCreateMBR = globals.currentApplicationAddress.minBalance
	global CurrentApplicationAddress
	acct_params_get AcctMinBalance
	assert
	frame_bury -3 // preCreateMBR: uint64

	// Create the vault
	// examples/arc12/arc12.algo.ts:148
	// sendMethodCall<[Account, Account], void>({
	itxn_begin
	int appl
	itxn_field TypeEnum
	method "create(account,account)void"
	itxn_field ApplicationArgs

	// examples/arc12/arc12.algo.ts:150
	// onCompletion: 'NoOp'
	int NoOp
	itxn_field OnCompletion

	// examples/arc12/arc12.algo.ts:151
	// fee: 0
	int 0
	itxn_field Fee

	// examples/arc12/arc12.algo.ts:152
	// methodArgs: [receiver, this.txn.sender]
	frame_dig -1 // receiver: account
	itxn_field Accounts
	int 1
	itob
	itxn_field ApplicationArgs
	txn Sender
	itxn_field Accounts
	int 2
	itob
	itxn_field ApplicationArgs

	// examples/arc12/arc12.algo.ts:153
	// clearStateProgram: this.app.clearStateProgram
	txna Applications 0
	app_params_get AppClearStateProgram
	assert
	itxn_field ClearStateProgram

	// examples/arc12/arc12.algo.ts:154
	// approvalProgram: Vault
	byte b64 CCAEAAEEBSYEAAdjcmVhdG9yCHJlY2VpdmVyBm1hc3RlckICPooCAIv/KWQSRLEjshCL/7IHMgpzAUSyCCKyATEAsgmzMRYjCIz+i/44GCtkEkSL/jkaAIAEm0pkpRJEi/45MgE2MgASRIkxGSISMRgiEhBENhoCF8AcNhoBF8AciAACI0OKAgApi/5nKov/ZysyDWeJMRkiEjEYIhMQRChJNhoEF8AcNhoDF8AwNhoCF8AcNhoBF8AciAACI0OKBgAxACpkEkSL/oAgx/zNsljw1BicK/i21o7ml1CGQrCtAB8x/LkYw1S6hZoSRDIKcwFEjPuxJLIQi/+yFIv9shEishKL/7IVIrIBs4v9FryL+zIKcwFECYz6sSOyEIv+sgeL+jEBCbIIIrIBs7EjshAxALIHMQGyCCKyAbMyCnMJRCISQQAGKIv8iP7YiTEZIhIxGCITEEQoMRYjCTYaARfAMIgAAiNDigMAi/8WvkxIFESL/jgAMQASRIv+OAcyChJEMgpzAUSM/Yv/FjEAv7EkshAyCrIUIrISIrIBi/+yEbOL/jgIMgpzAUSL/QkSRIkxGSISMRgiExBEKDYaAxfAHDYaAhfAHDYaARfAMIgAAiNDigQAi/8WvkxIRIv9i/8WvkQSRDEAKmQSRClki/4SRDIKcwFEjPyL/xa8sSSyEDEAshQisgEyCov/cABEshKL/7IRMQCyFbOxI7IQi/2yB4v8MgpzAUQJsggisgGzMgpzCUQiEkEABiiL/oj95IkxGSUSMRgiExBEiAACI0OKAAAyCnMATEgURDEAMgkSRIkxG0AACTEZJRIjjgH/0YAEwTFcWYAEj0xWPYAEcZebQIAEKRxRYjYaAI4E/dX+AP64/xwA
	itxn_field ApprovalProgram

	// examples/arc12/arc12.algo.ts:155
	// globalNumByteSlice: 2
	int 2
	itxn_field GlobalNumByteSlice

	// examples/arc12/arc12.algo.ts:156
	// globalNumUint: 1
	int 1
	itxn_field GlobalNumUint
	itxn_submit

	// examples/arc12/arc12.algo.ts:159
	// vault = this.itxn.createdApplicationID
	itxn CreatedApplicationID
	frame_bury -4 // vault: application

	// Fund the vault with account MBR
	// examples/arc12/arc12.algo.ts:162
	// sendPayment({
	itxn_begin
	int pay
	itxn_field TypeEnum

	// examples/arc12/arc12.algo.ts:163
	// receiver: vault.address
	frame_dig -4 // vault: application
	app_params_get AppAddress
	assert
	itxn_field Receiver

	// examples/arc12/arc12.algo.ts:164
	// amount: globals.minBalance
	global MinBalance
	itxn_field Amount

	// examples/arc12/arc12.algo.ts:165
	// fee: 0
	int 0
	itxn_field Fee
	itxn_submit

	// examples/arc12/arc12.algo.ts:168
	// this.vaultMap.put(receiver, vault)
	frame_dig -1 // receiver: account
	frame_dig -4 // vault: application
	itob
	box_put

	// examples/arc12/arc12.algo.ts:171
	// assert(mbrPayment.amount === (globals.currentApplicationAddress.minBalance - preCreateMBR) + globals.minBalance)
	frame_dig -2 // mbrPayment: pay
	gtxns Amount
	global CurrentApplicationAddress
	acct_params_get AcctMinBalance
	assert
	frame_dig -3 // preCreateMBR: uint64
	-
	global MinBalance
	+
	==
	assert

	// examples/arc12/arc12.algo.ts:173
	// return vault;
	frame_dig -4 // vault: application
	itob
	byte 0x151f7c75
	swap
	concat
	log
	retsub

abi_route_verifyAxfer:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert

	// no dupn needed
	txna ApplicationArgs 2
	btoi
	txnas Applications
	txn GroupIndex
	int 1
	-
	txna ApplicationArgs 1
	btoi
	txnas Accounts
	callsub verifyAxfer
	int 1
	return

verifyAxfer:
	proto 3 0

	// examples/arc12/arc12.algo.ts:177
	// assert(this.vaultMap.exists(receiver))
	frame_dig -1 // receiver: account
	box_get
	swap
	pop
	assert

	// examples/arc12/arc12.algo.ts:179
	// assert(this.vaultMap.get(receiver) === vault)
	frame_dig -1 // receiver: account
	box_get
	assert
	btoi
	frame_dig -3 // vault: application
	==
	assert

	// examples/arc12/arc12.algo.ts:180
	// assert(vaultAxfer.assetReceiver === vault.address)
	frame_dig -2 // vaultAxfer: axfer
	gtxns AssetReceiver
	frame_dig -3 // vault: application
	app_params_get AppAddress
	assert
	==
	assert

	// examples/arc12/arc12.algo.ts:181
	// assert(vaultAxfer.assetCloseTo === globals.zeroAddress)
	frame_dig -2 // vaultAxfer: axfer
	gtxns AssetCloseTo
	global ZeroAddress
	==
	assert
	retsub

abi_route_hasVault:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert

	// no dupn needed
	txna ApplicationArgs 1
	btoi
	txnas Accounts
	callsub hasVault
	int 1
	return

hasVault:
	proto 1 0

	// examples/arc12/arc12.algo.ts:185
	// return this.vaultMap.exists(receiver);
	frame_dig -1 // receiver: account
	box_get
	swap
	pop
	itob
	byte 0x151f7c75
	swap
	concat
	log
	retsub

abi_route_getVaultId:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert

	// no dupn needed
	txna ApplicationArgs 1
	btoi
	txnas Accounts
	callsub getVaultId
	int 1
	return

getVaultId:
	proto 1 0

	// examples/arc12/arc12.algo.ts:189
	// return this.vaultMap.get(receiver);
	frame_dig -1 // receiver: account
	box_get
	assert
	btoi
	itob
	byte 0x151f7c75
	swap
	concat
	log
	retsub

abi_route_getVaultAddr:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert

	// no dupn needed
	txna ApplicationArgs 1
	btoi
	txnas Accounts
	callsub getVaultAddr
	int 1
	return

getVaultAddr:
	proto 1 0

	// examples/arc12/arc12.algo.ts:193
	// return this.vaultMap.get(receiver).address;
	frame_dig -1 // receiver: account
	box_get
	assert
	btoi
	app_params_get AppAddress
	assert
	byte 0x151f7c75
	swap
	concat
	log
	retsub

abi_route_deleteVault:
	txn OnCompletion
	int NoOp
	==
	txn ApplicationID
	int 0
	!=
	&&
	assert
	byte 0x; dup
	txna ApplicationArgs 2
	btoi
	txnas Accounts
	txna ApplicationArgs 1
	btoi
	txnas Applications
	callsub deleteVault
	int 1
	return

deleteVault:
	proto 4 0

	// The fee needs to be 0 because all of the fees need to paid by the vault call
	// This ensures the sender will be refunded for all fees if they are rejecting the last ASA
	// examples/arc12/arc12.algo.ts:199
	// assert(this.txn.fee === 0)
	txn Fee
	int 0
	==
	assert

	// examples/arc12/arc12.algo.ts:200
	// assert(vault === this.vaultMap.get(this.txn.sender))
	frame_dig -1 // vault: application
	txn Sender
	box_get
	assert
	btoi
	==
	assert

	// examples/arc12/arc12.algo.ts:202
	// vaultCreator = vault.global('creator') as Address
	frame_dig -1 // vault: application
	byte "creator"
	app_global_get_ex
	assert
	frame_bury -3 // vaultCreator: address

	// examples/arc12/arc12.algo.ts:203
	// assert(vaultCreator === creator)
	frame_dig -3 // vaultCreator: address
	frame_dig -2 // creator: account
	==
	assert

	// examples/arc12/arc12.algo.ts:205
	// preDeleteMBR = globals.currentApplicationAddress.minBalance
	global CurrentApplicationAddress
	acct_params_get AcctMinBalance
	assert
	frame_bury -4 // preDeleteMBR: uint64

	// Call delete on the vault
	// examples/arc12/arc12.algo.ts:208
	// sendAppCall({
	itxn_begin
	int appl
	itxn_field TypeEnum

	// examples/arc12/arc12.algo.ts:209
	// applicationID: vault
	frame_dig -1 // vault: application
	itxn_field ApplicationID

	// examples/arc12/arc12.algo.ts:210
	// onCompletion: 'DeleteApplication'
	int DeleteApplication
	itxn_field OnCompletion

	// examples/arc12/arc12.algo.ts:211
	// fee: 0
	int 0
	itxn_field Fee
	itxn_submit

	// examples/arc12/arc12.algo.ts:214
	// this.vaultMap.delete(this.txn.sender)
	txn Sender
	box_del

	// Send the MBR back to the vault creator
	// examples/arc12/arc12.algo.ts:217
	// sendPayment({
	itxn_begin
	int pay
	itxn_field TypeEnum

	// examples/arc12/arc12.algo.ts:218
	// receiver: vaultCreator
	frame_dig -3 // vaultCreator: address
	itxn_field Receiver

	// examples/arc12/arc12.algo.ts:219
	// amount: preDeleteMBR - globals.currentApplicationAddress.minBalance
	frame_dig -4 // preDeleteMBR: uint64
	global CurrentApplicationAddress
	acct_params_get AcctMinBalance
	assert
	-
	itxn_field Amount

	// examples/arc12/arc12.algo.ts:220
	// fee: 0
	int 0
	itxn_field Fee
	itxn_submit
	retsub

main:
	txn NumAppArgs
	bnz route_abi
	txn ApplicationID
	int 0
	==
	bnz bare_route_create

route_abi:
	method "createVault(account,pay)uint64"
	method "verifyAxfer(account,axfer,application)void"
	method "hasVault(account)uint64"
	method "getVaultId(account)uint64"
	method "getVaultAddr(account)address"
	method "deleteVault(application,account)void"
	txna ApplicationArgs 0
	match abi_route_createVault abi_route_verifyAxfer abi_route_hasVault abi_route_getVaultId abi_route_getVaultAddr abi_route_deleteVault
	err