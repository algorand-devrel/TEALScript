#pragma version 10
//#pragma mode logicsig

// This TEAL was generated by TEALScript v0.79.0
// https://github.com/algorandfoundation/TEALScript

// The address of this logic signature is J2G34GYWBR7DDPBCSBAEG66AYKVRDXRI5VCYKP3VTV2GOEP4P3G2N226GI

b route_logic

// hashPointToPoint(point: bytes): bytes
//
// hashPointToPoint
// Hashes a point to a point on the curve
// NOTE: ec_map_to maps fp_element to curve point. We use hash and then mod to map the point's X and Y bytes to fp_element first.
// What is inside ec_map_to (accessed Dec 13th 2023):
// https://github.com/algorand/go-algorand/blob/master/data/transactions/logic/pairing.go#L862
// https://pkg.go.dev/github.com/consensys/gnark-crypto/ecc/bn254#MapToG1
// https://github.com/Consensys/gnark-crypto/blob/master/ecc/bn254/fp/element.go#L42
// @param point - The point to hash
// @returns The result of the operation
hashPointToPoint:
	proto 1 1

	// Push empty bytes after the frame pointer to reserve space for local variables
	byte 0x
	dupn 2

	// tests/contracts/lsig.algo.ts:15
	// hash = sha256(point)
	frame_dig -1 // point: bytes
	sha256
	frame_bury 0 // hash: byte[32]

	// tests/contracts/lsig.algo.ts:16
	// fpElement =
	//       btobigint(hash) % btobigint(hex('30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47'))
	frame_dig 0 // hash: byte[32]
	byte 0x30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47
	b%
	frame_bury 1 // fpElement: bigint

	// tests/contracts/lsig.algo.ts:18
	// result = ecMapTo('BN254g1', rawBytes(fpElement))
	frame_dig 1 // fpElement: bigint
	ec_map_to BN254g1
	frame_bury 2 // result: byte[]

	// tests/contracts/lsig.algo.ts:19
	// return result;
	frame_dig 2 // result: byte[]

	// set the subroutine return value
	frame_bury 0

	// pop all local variables from the stack
	popn 2
	retsub

// logic()void
route_logic:
	// execute logic()void
	callsub logic
	int 1
	return

// logic(): void
logic:
	proto 0 0

	// tests/contracts/lsig.algo.ts:23
	// this.hashPointToPoint('')
	byte 0x // ""
	callsub hashPointToPoint
	retsub